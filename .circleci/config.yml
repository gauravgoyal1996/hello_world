version: 2.0
defauts: &defaults
  docker:
  - image: ubuntu:18.04
jobs:
 build:
   docker:
   - image: ubuntu:18.04
   steps:
     - checkout
 deploy:
   docker:
   - image: ubuntu:18.04
   steps:
     - run:
         name: running commands
         command: |
           apt-get update 
           apt-get -y install openssh-server
	   vi .ssh/known_hosts
           ssh-keyscan -H ec2-18-218-226-96.us-east-2.compute.amazonaws.com >> ~/.ssh/known_hosts
           echo -e "private_key_file = ~/.ssh/id_rsa$FINGER_PRINT
           echo -e "remote_user = ubuntu"
           ssh -i "$private_key_file" $remote_user@ec2-18-218-226-96.us-east-2.compute.amazonaws.com
           mkdir hello
           cd /home/ubuntu/hello_world
           go run hello.go &
           curl 127.0.0.1:8080
workflows:
 version: 2
 Example_Workflow:
  jobs:
   - build
   - deploy:
      requires:
       - build

